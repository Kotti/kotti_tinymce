<html xmlns="http://www.w3.org/1999/xhtml" metal:define-macro="main">
    <head>
        <meta charset="utf-8" />
        <title>Kotti Browser</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- HTML5 shim, for IE6-8 support of HTML elements -->
        <!--[if lt IE 9]>
            <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="shortcut icon" href="${request.static_url('kotti:static/favicon.ico')}" />
    </head>
    <body class="${request.user is not None and 'logged-in'}
                 view-${request.view_name or 'default'}
                 ${api.body_css_class}">
        <div class="row-fluid">
            <div class="span12">
                <div tal:replace="api.render_template('kotti:templates/edit/breadcrumbs.pt')" />
            </div>
        </div>
        <div class="row-fluid">
            <form id="kottibrowser_form">
                <div class="span4">
                    <ul class="nav nav-pills nav-stacked">
                        <li tal:condition="request.resource_url(context).rstrip('/') != request.application_url.rstrip('/')">
                            <a href="${request.resource_url(context)}../@@kottibrowser">
                                <i class="icon-arrow-up"></i>
                                ..
                            </a>
                        </li>
                        <tal:block tal:repeat="child context.children or context.parent.children">
                            <li class="${child == context and 'active' or ''}">
                                <a href="${request.resource_url(child)}@@kottibrowser">
                                    <i tal:condition="child.type == 'image'" class="icon-picture"></i>
                                    <i tal:condition="child.type == 'file'" class="icon-file"></i>
                                    <i tal:condition="child.type not in ('file', 'image', )" class="icon-list-alt"></i>
                                    ${child.title}
                                </a>
                            </li>
                        </tal:block>
                    </ul>
                </div>
                <div class="span8" tal:condition="link_selectable">
                    <input type="text" name="url" id="url" value="${request.resource_url(context)}" /><br />
                    <input type="button" value="Insert Link" onClick="kottibrowserdialog.submit();" />
                </div>
                <div class="span8" tal:condition="image_selectable">
                    <img id="kottibrowser_image_preview" src="${request.resource_url(context)}image/span1" />
                    <hr />
                    <script>
                        var image_url = '${image_url}';
                    </script>
                    <label for="url">Image URL</label>
                    <input class="span12" type="text" name="url" id="url" value="${request.resource_url(context)}image" />
                    <label for="image_scale">Image Scale</label>
                    <select class="span12" name="image_scale">
                        <option tal:repeat="image_scale image_scales" value="${image_scale.value}">
                            ${image_scale.title}
                        </option>
                    </select>
                    <input type="button" value="Insert Image" onClick="kottibrowserdialog.submit();" />
                </div>
            </form>
        </div>
    </body>
</html>
